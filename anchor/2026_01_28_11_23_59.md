# Session Anchor Protocol

## Headline

Successfully deployed Gemini 3.0 Flash with Async Audit Streaming to resolve perceived buffering on production.

## Critical Facts & Invariants

- **Model Law**: Must ALWAYS be `gemini-3-flash-preview`. Guarded by AI-trap comments in `backend/config.py`.
- **Async Streaming**: `governance.py` refactored to `AsyncIterator` to yield audit logs instantly, eliminating the 3-5s "thinking" hang.
- **WebSocket Hot-Link**: `main.py` configured with `ping_interval=25` and `ping_timeout=60` to prevent Cloud Run proxy from buffering idle streams.
- **Diagnostic Command**: Type `test:stream` in the chat to verify the transport layer independently of LLM latency.
- **Deployment**: Latest build is live at `https://atlas-g-portfolio-651633010401.us-central1.run.app`.

## Next Micro-Goals

Verify real-world "feel" on the production site and confirm that audit logs appear immediately upon query.

## Instructions for Next Session

1. Read `anchor/2026_01_28_11_23_59.md`.
2. Verify model version is still `gemini-3-flash-preview`.
3. Proceed with any further UI/UX polish if streaming is confirmed smooth.
